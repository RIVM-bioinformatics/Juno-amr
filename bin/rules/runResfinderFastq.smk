rule runResfinderFastq:
    """Trying to run resfinder with hardcoded paths and all packages installed in a environment generated by conda/snakemake"""
    input:
        #Samples retrieved from config.yml
        lambda wildcards: config["samples_fastq"][wildcards.sample],
        # Hoe weet ik dat dit nu op de goede volgorde gaat?
        r1 = "input_data/fastq/{sample}.fastq",
        r2 = "input_data/fastq/{sample}.fastq"

    output:
        #Output file requested by rule all
        output_file = "output/{sample}/PointFinder_results.txt",
        #Directory per sample
        output_dir = directory("output/{sample}")
    
    conda:
        "../../envs/resfinder.yml"
    
    message:
        "Processing received samples in resfinder"

    params:
    #get parameters from configfile
        #minimum coverage for resfinder between .. and ..
        #l = {min_cov_length},
        l = 0.6,
        # receive threshold for identity between .. and ..
        t = 0.8,
        # Receive type of species or guess species
        species = "Salmonella",
        # Receive empty string or string with --point
        runpointfinder = "--point"

    shell:
        # Command to call resfinder
        # Make paths wildcards
        "python3 ../testing_resfinder/resfinder/run_resfinder.py -o {output.output_dir} -s {params.species} -l {params.l} -t {params.t} --acquired {params.runpointfinder} -ifq {input.r1} {input.r2}"

